{"version":3,"file":"toggle-native.js","sources":["../src/custom-elements/toggle-native.js"],"sourcesContent":["const template = `\n  <h2>\n    <button aria-expanded=\"false\">\n      <a name=\"\" class=\"summary\"></a>\n      <svg aria-hidden=\"true\" focusable=\"false\" viewBox=\"0 0 10 10\" fill=\"currentColor\">\n        <rect class=\"vertical\" height=\"8\" width=\"2\" y=\"1\" x=\"4\"/>\n        <rect height=\"2\" width=\"8\" y=\"4\" x=\"1\"/>\n      </svg>\n    </button>\n  </h2>\n\n  <div class=\"content\" hidden>\n    <slot></slot>\n  </div>\n\n  <style>\n  h2 {\n    margin: 0;\n  }\n\n  button {\n    all: inherit;\n    cursor: pointer;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.5em 0;\n    width: 100%;\n  }\n  button svg {\n    height: 1em;\n    margin-left: 0.5em;\n  }\n\n  [aria-expanded=\"true\"] .vertical {\n    display: none;\n  }\n  </style>\n`;\n\nclass ToggleSection extends HTMLElement {\n  static get observedAttributes() {\n    return ['summary', 'open'];\n  }\n\n  constructor() {\n    super();\n\n    this.toggle = this.toggle.bind(this);\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.innerHTML = template;\n\n    this.$button = this.shadowRoot.querySelector('button');\n    this.$summary = this.shadowRoot.querySelector('.summary');\n  }\n\n  connectedCallback() {\n    if (!this.hasAttribute('summary')) {\n      console.warn('<toggle-section> - requires attribute \"summary\".');\n    }\n\n    this.$button.addEventListener('click', this.toggle);\n  }\n\n  disconnectedCallback() {\n    this.$button.removeEventListener('click', this.toggle);\n  }\n\n  attributeChangedCallback(name, oldValue, value) {\n    switch (name) {\n      case 'summary':\n        return this.onSummaryChange(value);\n      case 'open': {\n        return this.onOpenChange();\n      }\n      default:\n        console.warn(`<toggle-section> - unhandles attribute \"${name}\"`);\n    }\n  }\n\n  toggle() {\n    this.toggleAttribute('open');\n  }\n\n  onSummaryChange(value) {\n    this.$summary.textContent = value;\n    this.$summary.setAttribute('name', value);\n  }\n\n  onOpenChange() {\n    const expanded = this.hasAttribute('open');\n    this.$button.setAttribute('aria-expanded', expanded);\n    this.shadowRoot.querySelector('.content').hidden = !expanded;\n  }\n\n  get open() {\n    return this.hasAttribute('open');\n  }\n\n  set open(val) {\n    if (val) {\n      this.setAttribute('open', val);\n    } else {\n      this.removeAttribute('open');\n    }\n  }\n}\n\ncustomElements.define('toggle-section', ToggleSection);\n"],"names":[],"mappings":";;AAAA,MAAM,QAAQ,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsClB,CAAC,CAAC;;AAEF,MAAM,aAAa,SAAS,WAAW,CAAC;EACtC,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;GAC5B;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAErC,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;IACpC,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,QAAQ,CAAC;;IAErC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IACvD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;GAC3D;;EAED,iBAAiB,GAAG;IAClB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE;MACjC,OAAO,CAAC,IAAI,CAAC,kDAAkD,CAAC,CAAC;KAClE;;IAED,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;GACrD;;EAED,oBAAoB,GAAG;IACrB,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;GACxD;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE;IAC9C,QAAQ,IAAI;MACV,KAAK,SAAS;QACZ,OAAO,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;MACrC,KAAK,MAAM,EAAE;QACX,OAAO,IAAI,CAAC,YAAY,EAAE,CAAC;OAC5B;MACD;QACE,OAAO,CAAC,IAAI,CAAC,CAAC,wCAAwC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KACpE;GACF;;EAED,MAAM,GAAG;IACP,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;GAC9B;;EAED,eAAe,CAAC,KAAK,EAAE;IACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,KAAK,CAAC;IAClC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;GAC3C;;EAED,YAAY,GAAG;IACb,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC3C,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;IACrD,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,MAAM,GAAG,CAAC,QAAQ,CAAC;GAC9D;;EAED,IAAI,IAAI,GAAG;IACT,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;GAClC;;EAED,IAAI,IAAI,CAAC,GAAG,EAAE;IACZ,IAAI,GAAG,EAAE;MACP,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;KAChC,MAAM;MACL,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;KAC9B;GACF;CACF;;AAED,cAAc,CAAC,MAAM,CAAC,gBAAgB,EAAE,aAAa,CAAC,CAAC"}